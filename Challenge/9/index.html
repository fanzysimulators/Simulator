<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="../../favicon.png">
<title>The Challenge: The Duel II — Simulator</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="./style.css" />

<style>
  html, body, .btn, select, input, dialog, .mini-card, .panel, .top-nav {
    font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .page-shell .content { display:flex; flex-direction:column; align-items:center; }
  .block { width:100%; max-width:1100px; }
  .center { text-align:center; }
  .muted { opacity:.85; font-weight:300; }
  #ep-content, #ep-actions { display:flex; flex-direction:column; align-items:center; gap:14px; }
  .actions-row { display:flex; flex-wrap:wrap; gap:14px; justify-content:center; }
  .simulate-row { display:flex; justify-content:center; margin-top:14px; }
  .btn.simulate { padding:14px 22px; font-weight:600; font-size:1.05rem; }
  .btn { margin:6px; }

  .sidebar.left .section-links { display:flex; flex-direction:column; }
  .sidebar.left .section-links .btn { margin:4px 0 !important; }

  .teams-grid{
    display:flex;
    flex-direction:column;
    gap:18px;
    justify-content:center;
  }

.team-box {
    display: block !important;
    width: 100%;
    max-width: 980px;
    margin: 0 auto;
    padding: 18px;
    border-radius: 18px;
    background: rgba(18,20,34,var(--panel-alpha));
    border: 2px solid rgba(120,130,155,0.35);
    box-shadow: var(--soft-shadow);
    text-align: center;
    box-sizing: border-box;
}

.team-head {
    display: block !important;
    width: 100%;
    text-align: center;
    margin-bottom: 12px;
}

.team-head .label {
    display: inline-block;
    font-weight: 600;
    font-size: 1.1rem;
}

  .team-tag{
    font-weight:600;
    opacity:.92;
  }

  .team-inner{
    display:grid;
    grid-template-columns: repeat(4, minmax(220px, 1fr));
    gap:14px;
  }

  @media (max-width: 1100px){
    .team-box{ max-width:100%; }
  }

  @media (max-width: 960px){
    .team-inner{
      grid-template-columns: repeat(2, minmax(220px, 1fr));
    }
  }

  @media (max-width: 640px){
    .team-inner{
      grid-template-columns: repeat(1, minmax(220px, 1fr));
    }
  }

  .pick-card{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
    padding:14px;
    border-radius:14px;
    background:#15171f;
    border:1px solid var(--glass-border);
    box-shadow:var(--soft-shadow);
    min-height:240px;
    text-align:center;
    width:100%;
    box-sizing:border-box;
  }

  .pick-card .avatar{
    width:88px;
    height:88px;
    border-radius:50%;
    object-fit:cover;
  }

  .pick-card select{
    width:220px;
    max-width:100%;
    background:rgba(15,17,22,0.9);
    border:1px solid rgba(120,130,155,0.35);
    color:#e9eefb;
    border-radius:10px;
    padding:10px 12px;
    outline:none;
  }

  .pick-card select:focus{
    box-shadow:0 0 0 2px rgba(120,180,255,0.35);
  }

  .pick-card .btn{
    width:220px;
    max-width:100%;
  }

  .status-section{ padding:10px; border:2px solid var(--glass-border); border-radius:12px; width:100%; }
  .status-title{ font-weight:600; margin:0 0 8px 0; text-align:center; }
  .status-grid{ display:flex; flex-wrap:wrap; gap:8px; justify-content:center; width:100%; }
  .status-col{ display:flex; flex-direction:column; gap:10px; width:100%; align-items:center; }
  .status-card{ display:flex; flex-direction:column; align-items:center; gap:4px; padding:8px; border-radius:12px;
    background:var(--glass); border:2px solid var(--glass-border); box-shadow:var(--soft-shadow);
    width:132px; text-align:center; box-sizing:border-box; position:relative; }
  .status-card.square { border-radius:8px; }
  .status-card.win { border-width:3px; box-shadow:0 0 0 4px rgba(0,255,0,.45) inset, 0 0 12px rgba(0,255,0,.35); }
  .status-card.lose { border-width:3px; box-shadow:0 0 0 4px rgba(255,0,0,.45) inset, 0 0 12px rgba(255,0,0,.35); }
  .status-card .avatar{ width:64px; height:64px; border-radius:50%; object-fit:cover; }
  .status-card .name{ font-size:.9rem; }
  .status-card .badge{ font-size:.5rem; opacity:.9; }

  .row-box{
    display:flex; flex-direction:column; align-items:center; gap:8px;
    padding:10px; border-radius:12px; border:2px solid var(--glass-border); background:var(--glass);
    width:min(860px, 96%); box-sizing:border-box;
  }
  .row-box.wide{ width:min(980px, 98%); }
  .row-box.team{ border:2px solid var(--glass-border); border-radius:12px; }
  .tri-grid > .row-box{ border:2px solid var(--glass-border); border-radius:12px; }

  .row-cards{ display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; }

  .callout-row{ display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap; }

  .events-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap:12px; justify-items:center; width:100%; }
  .events-grid.three-cols{ grid-template-columns: repeat(3, minmax(260px, 1fr)); }
  .mini-card{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px; border-radius:16px;
    background:var(--glass); border:1px solid var(--glass-border); box-shadow:var(--soft-shadow); width:95%; max-width:1000px; text-align:center; box-sizing:border-box; }
  .mini-card.note{ width:95%; max-width:1000px; }
  .mini-card .avatar{ width:92px; height:92px; border-radius:50%; object-fit:cover; }
  .mini-card .avatar.xs{ width:28px; height:28px; border-radius:50%; object-fit:cover; }
  .row.tiny-avatars{ display:flex; gap:8px; justify-content:center; margin-bottom:6px; flex-wrap:wrap; }

  .hl-inline{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; width:100%; }
  .hl-inline .mini-card{ width:auto; max-width:320px; }

  .matchup{
    display:grid; grid-template-columns:1fr auto 1fr; gap:12px; align-items:center; justify-items:center;
    padding:12px; border:1px solid var(--glass-border); border-radius:12px; width:720px; max-width:100%; background:var(--glass); margin-top:6px; box-sizing:border-box;
  }
  .arrow{ opacity:.85; font-weight:700; }
  .matchup-actions{ display:flex; gap:10px; justify-content:center; }

  .tri-grid{ display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:10px; width:100%; }
  .six-grid{ display:grid; grid-template-columns: repeat(6, minmax(0, 1fr)); gap:10px; width:100%; }
  @media (max-width: 980px){ .six-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); } }
  @media (max-width: 640px){ .tri-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }

  .stats-wrap{ display:flex; flex-direction:column; align-items:center; gap:16px; width:100%; }
  .placements-row{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; width:100%; }

  .stats-table{ width:100%; max-width:720px; border-collapse:collapse; }
  .stats-table th, .stats-table td{ padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; }

  .challenge-name{ font-size:1.5rem; font-weight:800; letter-spacing:.2px; text-align:center; margin:2px 0 4px 0; color:#ffffff; }

  .border-gold  { border:3px solid #C9A227 !important; box-shadow:0 0 0 4px rgba(201,162,39,.45) inset, 0 0 16px rgba(201,162,39,.45); }
  .border-silver{ border:3px solid #B0B9C6 !important; box-shadow:0 0 0 4px rgba(176,185,198,.45) inset, 0 0 16px rgba(176,185,198,.45); }
  .border-bronze{ border:3px solid #CD7F32 !important; box-shadow:0 0 0 4px rgba(205,127,50,.45) inset, 0 0 16px rgba(205,127,50,.45); }

  .glow-gold { border:3px solid #C9A227 !important; box-shadow:0 0 0 4px rgba(201,162,39,.45) inset, 0 0 16px rgba(201,162,39,.45); }

  .final-spacer { height:8px; }

.stats-table {
  width: 100%;
  max-width: 760px;
  border-collapse: collapse;
  background: rgba(20, 28, 44, 0.55);
  backdrop-filter: blur(6px);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 12px rgba(0,0,0,0.35) inset;
}

.stats-table th {
  padding: 10px 14px;
  background: rgba(60, 80, 120, 0.5);
  font-weight: 700;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.stats-table td {
  padding: 10px 14px;
  font-size: 15px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.stats-table tr:last-child td {
  border-bottom: none;
}

.stat-cat {
  color: #8ab4ff;
  font-weight: 600;
  width: 34%;
}

.stat-name {
  color: #ffffff;
  width: 33%;
}

.stat-value {
  color: #00d4ff;
  text-align: right;
  width: 33%;
}

</style>
</head>
<body>
  <div class="bg fx-nebula" aria-hidden="true"></div>
  <div class="bg fx-hex" aria-hidden="true"></div>
  <div class="bg fx-circuit" aria-hidden="true"></div>
  <div class="bg fx-glow" aria-hidden="true"></div>

  <header class="site-header">
    <div class="brand">
      <span class="logo-dot" aria-hidden="true"></span>
      <h1>The Challenge — Battle of The Sexes 2</h1>
    </div>
    <nav class="top-nav" aria-label="Primary">
      <a class="btn nav" href="../../index.html">Home</a>    
<button class="btn" id="btn-back-cast" type="button">Back to Cast Selection</button>
      <button class="btn" id="btn-reset-session" type="button">Reset Season</button>
    </nav>
  </header>

  <div class="page-shell antm-shell">
    <aside class="sidebar left">
      <div class="panel">
        <h3>Episodes</h3>
        <div id="episode-accordion"></div>
      </div>
      <div class="panel" id="stats-panel" style="margin-top:12px; display:none;">
        <h3>Statistics</h3>
        <div class="section-links">
          <button class="btn" id="goto-placements">Placements</button>
          <button class="btn" id="goto-stats">Other Statistics</button>
          <button class="btn" id="goto-chart">Season Chart</button>
        </div>
      </div>
    </aside>

    <main class="content" id="view-root">
      <section id="view-cast" class="block">
        <header class="block-head center"><h2>Choose Your Cast</h2></header>
        <div id="data-warning" class="data-warning" style="display:none;">
          <strong>Player data not loaded.</strong><br />
          Serve this over http://localhost and ensure ../../player_data.js exists.
        </div>
        <div class="cast-controls" style="display:flex; justify-content:center; margin-bottom:12px;">
          <label class="filter">
            <span>Choose Show:</span>
            <select id="filter-show" name="filter-show" aria-label="Filter by show" autocomplete="off"></select>
          </label>
        </div>

        <div class="teams-grid" id="teams-grid"></div>

        <div class="actions-row" style="margin-top:12px;">
          <button class="btn" id="btn-randomize" type="button">Randomize Cast</button>
          <button class="btn" id="btn-reset-cast" type="button">Reset Cast</button>
          <button class="btn" id="btn-profiles" type="button">Profiles</button>
          <button class="btn" id="btn-relationships" type="button">Relationships</button>
        </div>
        <div class="simulate-row">
          <button class="btn simulate" id="btn-simulate" type="button">Simulate Season</button>
        </div>
      </section>

      <section id="view-episode" class="block" hidden>
        <header class="block-head center">
          <h2 id="ep-title">Episode</h2>
          <p class="muted" id="ep-subtitle"></p>
        </header>
        <div id="ep-content"></div>
        <div id="ep-actions" class="actions-row"></div>
      </section>
    </main>

    <aside class="sidebar right">
      <div class="panel">
        <h3>Season Info</h3>
        <ul class="bullet-list" id="season-info">
          <li>Players: <span id="info-cast-size">0</span></li>
          <li>Seed: <span id="info-seed">—</span></li>
          <li>Status: <span id="info-status">Not simulated</span></li>
        </ul>
      </div>
    </aside>
  </div>

  <!-- Data -->
  <script src="../../player_data.js"></script>
  <script src="./battle_of_the_sexes2_daily_data.js"></script>
  <script src="./battle_of_the_sexes2_final_data.js"></script>
  <script src="./battle_of_the_sexes2_events.js"></script>

  <!-- Load the simulation logic from an external script file. This keeps the simulation
       code out of the HTML source so it isn't visible when viewing the page source. -->
  <script src="./battle_of_the_sexes2_sim.js"></script>

<!-- simulation script removed from here and moved to battle_of_the_sexes2_sim.js -->
</body>
</html>
