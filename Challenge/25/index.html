<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="../../favicon.png">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Challenge: Free Agents — Simulator</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="./style.css" />

<style>
  html, body, .btn, select, input, dialog, .mini-card, .panel, .top-nav { font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .page-shell .content { display:flex; flex-direction:column; align-items:center; }
  .block { width:100%; max-width:1100px; }
  .center { text-align:center; }
  .muted { opacity:.85; font-weight:300; }

  #ep-content, #ep-actions { display:flex; flex-direction:column; align-items:center; gap:12px; }
  .actions-row { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; }
  .simulate-row { display:flex; justify-content:center; margin-top:12px; }
  .btn.simulate { padding:14px 22px; font-weight:600; font-size:1.05rem; }

  .teams-grid{ display:grid; grid-template-columns: repeat(4, minmax(210px, 1fr)); gap:14px; justify-items:center; }
  .pick-card{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px; border-radius:14px; background:rgba(20,22,30,.68); border:1px solid var(--glass-border); box-shadow:var(--soft-shadow); min-height:240px; text-align:center; width:100%; box-sizing:border-box; }
  .pick-card .avatar{ width:88px; height:88px; border-radius:50%; object-fit:cover; }
  .pick-card select{ width:200px; max-width:100%; background:rgba(15,17,22,.9); border:1px solid rgba(120,130,155,.35); color:#e9eefb; border-radius:10px; padding:10px 12px; outline:none; }
  .pick-card .btn{ width:200px; max-width:100%; }

  .events-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:12px; justify-items:center; }
  .mini-card{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px; border-radius:16px; background:var(--glass); border:1px solid var(--glass-border); box-shadow:var(--soft-shadow); width:260px; text-align:center; box-sizing:border-box; }
  .mini-card.note{ width:360px; }

  .status-slot{ display:flex; flex-direction:column; align-items:center; gap:8px; padding:10px; border-radius:12px; background:rgba(20,22,30,.68); border:1px solid var(--glass-border); transition:box-shadow .2s ease; }
  .status-slot .avatar{ width:88px; height:88px; border-radius:50%; object-fit:cover; }
  .status-slot .name{ font-size:.95rem; }

  .row-flex{ display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }

  .vote-card{ width:720px; max-width:100%; display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px; padding:12px; border-radius:14px; background:var(--glass); border:1px solid var(--glass-border); text-align:center; box-sizing:border-box; }
  .team-strip{ display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap:wrap; }

  .matchup{ display:grid; grid-template-columns:1fr auto 1fr; gap:12px; align-items:center; padding:12px; border:1px solid var(--glass-border); border-radius:12px; width:860px; max-width:100%; background:var(--glass); margin-top:6px; box-sizing:border-box; }
  .center-btn { display:flex; justify-content:center; width:100%; }

  .border-gold   { box-shadow:0 0 0 2px #f7d26b inset, 0 0 18px rgba(247,210,107,.35); border-color:#f7d26b !important; }
  .border-silver { box-shadow:0 0 0 2px #d0d7e1 inset, 0 0 18px rgba(208,215,225,.35); border-color:#d0d7e1 !important; }
  .border-bronze { box-shadow:0 0 0 2px #c58b5f inset, 0 0 18px rgba(197,139,95,.35); border-color:#c58b5f !important; }
</style>
</head>
<body>
  <div class="bg fx-nebula" aria-hidden="true"></div>
  <div class="bg fx-hex" aria-hidden="true"></div>
  <div class="bg fx-circuit" aria-hidden="true"></div>
  <div class="bg fx-glow" aria-hidden="true"></div>

  <header class="site-header">
    <div class="brand">
      <span class="logo-dot" aria-hidden="true"></span>
      <h1>The Challenge — Free Agents</h1>
    </div>
    <nav class="top-nav" aria-label="Primary">
      <a class="btn nav" href="../../index.html">Home</a>
  <button class="btn" id="btn-back-cast" type="button">Back to Cast Selection</button>
      <button class="btn" id="btn-reset-session" type="button">Reset Season</button>
    </nav>
  </header>

  <div class="page-shell antm-shell">
    <aside class="sidebar left">
      <div class="panel">
        <h3>Episodes</h3>
        <div id="episode-accordion"></div>
      </div>
      <div class="panel" id="stats-panel" style="margin-top:12px; display:none;">
        <h3>Statistics</h3>
        <div class="section-links">
          <button class="btn" id="goto-placements">Placements</button>
          <button class="btn" id="goto-stats">Other Statistics</button>
          <button class="btn" id="goto-chart">Season Chart</button>
        </div>
      </div>
    </aside>

    <main class="content" id="view-root">
      <!-- CAST -->
      <section id="view-cast" class="block">
        <header class="block-head center">
          <h2>Choose Your Cast</h2>
        </header>

        <div id="data-warning" class="data-warning" style="display:none;">
          <strong>Player data not loaded.</strong><br />
          Serve this over http://localhost and ensure ../../player_data.js exists.
        </div>

        <div class="cast-controls" style="display:flex; justify-content:center; margin-bottom:12px;">
          <label class="filter">
            <span>Choose Show:</span>
            <select id="filter-show" name="filter-show" aria-label="Filter by show" autocomplete="off"></select>
          </label>
        </div>

        <div class="center" style="margin:6px 0 6px 0;"><strong>Male Contestants</strong></div>
        <div class="teams-grid" id="teams-grid-males"></div>

        <div class="center" style="margin:16px 0 6px 0;"><strong>Female Contestants</strong></div>
        <div class="teams-grid" id="teams-grid-females"></div>

        <div class="actions-row" style="margin-top:12px;">
          <button class="btn" id="btn-randomize" type="button">Randomize Cast</button>
          <button class="btn" id="btn-reset-cast" type="button">Reset Cast</button>
          <button class="btn" id="btn-profiles" type="button">Profiles</button>
          <button class="btn" id="btn-relationships" type="button">Relationships</button>
        </div>
        <div class="simulate-row">
          <button class="btn simulate" id="btn-simulate" type="button">Simulate Season</button>
        </div>
      </section>

      <!-- EP / STATS VIEW -->
      <section id="view-episode" class="block" hidden>
        <header class="block-head center">
          <h2 id="ep-title">Episode</h2>
          <p class="muted" id="ep-subtitle"></p>
        </header>
        <div id="ep-content"></div>
        <div id="ep-actions" class="actions-row"></div>
      </section>
    </main>

    <aside class="sidebar right">
      <div class="panel">
        <h3>Season Info</h3>
        <ul class="bullet-list" id="season-info">
          <li>Players: <span id="info-cast-size">0</span></li>
          <li>Seed: <span id="info-seed">—</span></li>
          <li>Status: <span id="info-status">Not simulated</span></li>
        </ul>
      </div>
    </aside>
  </div>

  <!-- Finals cumulative times -->
  <dialog id="times-panel">
    <h3 style="margin:0 0 8px 0;">Cumulative Final Times</h3>
    <div id="times-table"></div>
    <div style="display:flex; justify-content:flex-end; margin-top:10px;">
      <button class="btn" id="times-close" type="button">Close</button>
    </div>
  </dialog>

  <!-- data files -->
  <script src="../../player_data.js"></script>
  <script src="./daily_data.js"></script>
  <script src="./elimination_data.js"></script>
  <script src="./final_stages_data.js"></script>
  <script src="./events.js"></script>
  <script src="./fa_sim.js"></script>

</body>
</html>
