<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="../../favicon.png">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>America&#39;s Next Top Model — Profiles</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="./style.css" />

<style>
  .skills-grid { display: grid; gap: 16px; grid-template-columns: repeat(2, minmax(240px, 1fr)); }
  @media (max-width: 900px){ .skills-grid { grid-template-columns: 1fr; } }
  .skill-card {
    display: grid; gap: 8px; padding: 12px; border-radius: 14px;
    border: 1px solid rgba(255,255,255,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04)), rgba(255,255,255,.06);
    backdrop-filter: blur(8px);
  }
  .skill-title { font-weight: 600; letter-spacing: .2px; }
  .skill-desc  { font-size: .82rem; color: var(--muted); line-height: 1.25; }
  .neo-select{
    --glow: rgba(106,169,255,.28);
    position:relative; width:100%; border-radius:12px; padding:1px;
    background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
    box-shadow: 0 0 0 1px rgba(255,255,255,.10) inset, 0 0 18px var(--glow);
    transition: box-shadow .25s ease, transform .2s ease; backdrop-filter: blur(var(--panel-blur));
  }
  .neo-select:focus-within{ box-shadow: 0 0 0 1px rgba(255,255,255,.12) inset, 0 0 26px var(--glow); transform: translateY(-1px); }
  .neo-select select{
    appearance:none; -webkit-appearance:none; width:100%;
    border:none; outline:none; border-radius:10px;
    padding:12px 44px 12px 14px;
    font-weight:600; color:var(--text);
    background: #0d0d0d;
    transition: background-color .25s ease, color .25s ease, box-shadow .2s ease;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.35), inset 0 -1px 0 rgba(0,0,0,.12);
  }
  .neo-select::after{
    content:""; position:absolute; right:12px; top:50%; width:14px; height:14px; pointer-events:none; transform: translateY(-50%);
    background-image: url('data:image/svg+xml;utf8,<svg width="14" height="14" viewBox="0 0 24 24" fill="%23ffffff" xmlns="http://www.w3.org/2000/svg"><path opacity="0.9" d="M7 10l5 5 5-5"/></svg>');
    filter: drop-shadow(0 1px 2px rgba(0,0,0,.35)); opacity:.9;
  }

  /* Dark player dropdown in sidebar */
  .filter select#focus{
    border-radius:10px;
    padding:10px 12px;
    background:#0d0d0d;
    color:white;
    border:1px solid rgba(255,255,255,0.12);
  }

  .focus-avatar-wrap { display: grid; justify-items: center; gap: 8px; margin-bottom: 8px; }
  .focus-name { font-weight: 600; }
</style>
</head>
<body>
  <div class="bg fx-nebula" aria-hidden="true"></div>
  <div class="bg fx-hex" aria-hidden="true"></div>
  <div class="bg fx-circuit" aria-hidden="true"></div>
  <div class="bg fx-glow" aria-hidden="true"></div>

  <header class="site-header">
    <div class="brand">
      <span class="logo-dot" aria-hidden="true"></span>
<h1>America&#39;s Next Top Model — Profiles</h1>
    </div>
    <nav class="top-nav" aria-label="Primary">
      <a class="btn nav" href="../../index.html">Home</a>
      <button class="btn" id="btn-reset-session" type="button">Reset Season</button>
    </nav>
  </header>

  <div class="page-shell antm-shell">
    <aside class="sidebar left">
      <div class="panel">
        <h3>Profiles</h3>

        <div class="focus-avatar-wrap">
          <img id="focus-avatar" class="avatar ring" src="./BlankProfile.webp" alt="">
          <div id="focus-name" class="focus-name">Contestant</div>
        </div>
        <div class="filter" style="justify-content:center; margin-bottom:10px;">
          <select id="focus" aria-label="Choose focal contestant"></select>
        </div>

        <div class="stack" style="justify-content:center; margin-bottom:10px;">
          <button class="btn" id="prev" type="button">◀ Prev</button>
          <button class="btn" id="next" type="button">Next ▶</button>
        </div>

        <div class="sep"></div>

        <div class="stack" style="justify-content:center;">
          <button class="btn" id="rand-player" type="button">Randomize Player</button>
          <button class="btn" id="rand-all" type="button">Randomize Cast</button>
          <button class="btn" id="reset-player" type="button">Reset Player</button>
          <button class="btn" id="reset-all" type="button">Reset Cast</button>
        </div>

        <div class="sep"></div>
        <div class="stack" style="justify-content:center;">
          <a class="btn" href="./index.html">Back to Simulator</a>
        </div>
      </div>
    </aside>

    <main class="content">
      <section class="block">
        <header class="block-head center">
          <h2>Profiles</h2>
          <p class="muted">Set skill tiers for each contestant. Values are saved for this session.</p>
        </header>

        <div id="no-cast" class="center-text" hidden>
          <p class="muted">No cast found for this session. Go back and choose your cast first.</p>
          <div class="stack" style="justify-content:center;">
            <a class="btn" href="./index.html">Back</a>
          </div>
        </div>

        <div class="block-head center"><h3>Photoshoot Skills</h3></div>
        <div id="skills-wrap" class="skills-grid"></div>

        <div class="sep"></div>
        <div class="block-head center"><h3>Other Skills</h3></div>
        <div id="social-wrap" class="skills-grid"></div>
      </section>
    </main>

    <aside class="sidebar right">
      <div class="panel">
        <h3>Tier Scale</h3>
        <ul class="bullet-list">
          <li><strong>+3</strong> — Great</li>
          <li><strong>+2</strong> — Really Good</li>
          <li><strong>+1</strong> — Good</li>
          <li><strong>0</strong> — Okay</li>
          <li><strong>-1</strong> — Passable</li>
          <li><strong>-2</strong> — Weak</li>
          <li><strong>-3</strong> — Bad</li>
        </ul>
      </div>
    </aside>
  </div>

  <script>
  (function(){
    "use strict";

    /* IMPORTANT: Same session key and shape as antm_sim.js / index.html */
    var KEY = "antm-season";
    var State = {
      load: function(){
        // Try same-tab session first
        try {
          var raw = sessionStorage.getItem(KEY);
          if(raw) return JSON.parse(raw);
        } catch(e){}
        // Try localStorage (in case user opened chart/profiles in a new tab)
        try {
          var raw2 = localStorage.getItem(KEY);
          if(raw2) return JSON.parse(raw2);
        } catch(e){}
        // Try opener storage (if opened from simulator with window.open)
        if(window.opener){
          try {
            var raw3 = window.opener.sessionStorage.getItem(KEY) || window.opener.localStorage.getItem(KEY);
            if(raw3) return JSON.parse(raw3);
          } catch(e){}
        }
        return null;
      },
      save: function(s){
        try { sessionStorage.setItem(KEY, JSON.stringify(s)); } catch(e){}
        try { localStorage.setItem(KEY, JSON.stringify(s)); } catch(e){}
      },
      clear: function(){
        try { sessionStorage.removeItem(KEY); } catch(e){}
        try { localStorage.removeItem(KEY); } catch(e){}
      }
    };

    var $ = function(s){ return document.querySelector(s); };

    $("#btn-reset-session").onclick = function(){ State.clear(); location.href="./index.html"; };

    var state = State.load();

    function mergedCast(){
      if(!state) return [];
      // ANTM sim stores cast as either state.castModels or state.cast
      var a = Array.isArray(state.castModels) ? state.castModels.filter(Boolean) : [];
      if(a.length) return a;
      var b = Array.isArray(state.cast) ? state.cast.filter(Boolean) : [];
      return b;
    }
    function castIds(){ return mergedCast().map(function(c){return c.id;}); }
    function find(id){ return mergedCast().find(function(c){return c.id===id;}); }
    function nameOf(id){ var p=find(id); return p ? (p.nickname || p.name || id) : id; }
    function imgOf(id){ var p=find(id); return (p && p.image) || "./BlankProfile.webp"; }

    if(!state || !mergedCast().length){
      $("#no-cast").hidden = false;
      return;
    }

    /* Build focus list */
    var ids = castIds();
    $("#focus").innerHTML = ids.map(function(id){ return '<option value="'+id+'">'+nameOf(id)+'</option>'; }).join("");
    $("#focus").onchange = function(){ updateFocus(); renderPhotoshoot(); renderOther(); };

    $("#prev").onclick = function(){
      var cur = $("#focus").value; var i = ids.indexOf(cur);
      $("#focus").value = ids[(i<=0 ? ids.length-1 : i-1)];
      updateFocus(); renderPhotoshoot(); renderOther();
    };
    $("#next").onclick = function(){
      var cur = $("#focus").value; var i = ids.indexOf(cur);
      $("#focus").value = ids[(i>=ids.length-1 ? 0 : i+1)];
      updateFocus(); renderPhotoshoot(); renderOther();
    };

    function updateFocus(){
      var id = $("#focus").value;
      $("#focus-avatar").src = imgOf(id);
      $("#focus-name").textContent = nameOf(id);
    }

    /* Ensure profile buckets exist and default to 0 */
    function ensureProfile(id){
      if(!state.profiles) state.profiles = {};
      if(!state.profiles[id]) state.profiles[id] = {};
      var keys = PHOTO_SKILLS.concat(OTHER_SKILLS).map(function(k){return k[0];});
      for(var i=0;i<keys.length;i++){
        var k = keys[i];
        if(typeof state.profiles[id][k] !== "number") state.profiles[id][k] = 0;
      }
    }

    /* Skill definitions (match ANTM simulator keys) */
    // Photoshoot Skills
    var PHOTO_SKILLS = [
      ["highfashion","High Fashion","Editorial modeling for luxury / couture: strong posing, angles, and polish."],
      ["catalog","Catalog","Clean, sellable poses for brands: clear product focus and consistency."],
      ["beauty","Beauty","Face work: expression control, eye contact, and close-up camera awareness."],
      ["character","Character","Ability to embody a role or concept and commit to an artistic direction."],
      ["emotions","Emotions","Range and believability of emotional expression on camera."],
      ["bodyscape","Bodyscape","Body awareness: lines, shapes, extension, and sculpting with posture."],
      ["candor","Candor","Natural presence and authenticity: believable, not forced or over-posed."],
      ["environment","Environment","Using the set/location well: interacting with props, terrain, and space."]
    ];

    // Other Skills
    var OTHER_SKILLS = [
      ["leadership","Leadership","Confidence and initiative: guiding others, directing energy, taking charge when needed."],
      ["style","Sense Of Style","Personal styling instincts: wardrobe choices, branding, and fashion taste."],
      ["runway","Runway","Walk technique: posture, pace, turns, and stage presence on a catwalk."],
      ["interview","Interview","Communication and charm: answering well, staying poised, telling a clear story."],
      ["personality","Personality","Charisma and presence: likeability, entertainment value, and natural magnetism."],
      ["versatility","Versatility","Adaptability across concepts: can switch looks and deliver in many styles."],
      ["professionalism","Professionalism","Work ethic and reliability: punctuality, focus, and taking direction well."],
      ["teamwork","Team Work","Collaboration skills: listening, supporting, and performing well in group tasks."]
    ];

    var TIERS = [5,4,3,2,1,0,-1,-2,-3,-4,-5];
    var LABELS_STD = {
      "5":"+5 Legendary",
      "4":"+4 Excellent",
      "3":"+3 Great",
      "2":"+2 Really Good",
      "1":"+1 Good",
      "0":"0 Okay",
      "-1":"-1 Passable",
      "-2":"-2 Weak",
      "-3":"-3 Bad",
      "-4":"-4 Awful",
      "-5":"-5 Terrible"
    };

    function selectHTML(valMap){
      return TIERS.map(function(v){ return '<option value="'+v+'">'+valMap[String(v)]+'</option>'; }).join("");
    }

    function cardHTML(key,title,desc,labels){
      return '<div class="skill-card">'+
        '<div class="skill-title">'+title+'</div>'+
        '<div class="skill-desc">'+desc+'</div>'+
        '<div class="neo-select"><select data-skill="'+key+'">'+ selectHTML(labels) +'</select></div>'+
      '</div>';
    }

    function renderPhotoshoot(){
      var id=$("#focus").value; if(!id) return;
      ensureProfile(id);
      var wrap=$("#skills-wrap"); wrap.innerHTML="";
      for(var i=0;i<PHOTO_SKILLS.length;i++){
        var def=PHOTO_SKILLS[i]; var holder=document.createElement("div");
        holder.innerHTML = cardHTML(def[0],def[1],def[2],LABELS_STD);
        var node=holder.firstElementChild, sel=node.querySelector("select");
        sel.value = String(state.profiles[id][def[0]]);
        sel.onchange = function(e){
          var k=e.target.getAttribute("data-skill");
          state.profiles[id][k]=Number(e.target.value);
          State.save(state);
        };
        wrap.appendChild(node);
      }
    }

    function renderOther(){
      var id=$("#focus").value; if(!id) return;
      ensureProfile(id);
      var wrap=$("#social-wrap"); wrap.innerHTML="";
      for(var i=0;i<OTHER_SKILLS.length;i++){
        var def=OTHER_SKILLS[i]; var holder=document.createElement("div");
        holder.innerHTML = cardHTML(def[0],def[1],def[2],LABELS_STD);
        var node=holder.firstElementChild, sel=node.querySelector("select");
        sel.value = String(state.profiles[id][def[0]]);
        sel.onchange = function(e){
          var k=e.target.getAttribute("data-skill");
          state.profiles[id][k]=Number(e.target.value);
          State.save(state);
        };
        wrap.appendChild(node);
      }
    }

    function randomTier(){ return TIERS[Math.floor(Math.random()*TIERS.length)]; }

    $("#rand-player").onclick=function(){
      var id=$("#focus").value; if(!id) return;
      ensureProfile(id);
      PHOTO_SKILLS.concat(OTHER_SKILLS).forEach(function(def){
        state.profiles[id][def[0]] = randomTier();
      });
      State.save(state); renderPhotoshoot(); renderOther();
    };
    $("#rand-all").onclick=function(){
      ids.forEach(function(id){
        ensureProfile(id);
        PHOTO_SKILLS.concat(OTHER_SKILLS).forEach(function(def){
          state.profiles[id][def[0]] = randomTier();
        });
      });
      State.save(state); renderPhotoshoot(); renderOther();
    };
    $("#reset-player").onclick=function(){
      var id=$("#focus").value; if(!id) return;
      ensureProfile(id);
      PHOTO_SKILLS.concat(OTHER_SKILLS).forEach(function(def){
        state.profiles[id][def[0]] = 0;
      });
      State.save(state); renderPhotoshoot(); renderOther();
    };
    $("#reset-all").onclick=function(){
      if(!state.profiles) state.profiles={};
      ids.forEach(function(id){
        ensureProfile(id);
        PHOTO_SKILLS.concat(OTHER_SKILLS).forEach(function(def){ state.profiles[id][def[0]] = 0; });
      });
      State.save(state); renderPhotoshoot(); renderOther();
    };

    /* Kickoff */
    updateFocus(); renderPhotoshoot(); renderOther();
  })();
  </script>
</body>
</html>
